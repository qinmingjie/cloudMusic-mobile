{"ast":null,"code":"var _jsxFileName = \"E:\\\\github-project\\\\cloudMusic-mobile\\\\src\\\\component\\\\newdic.js\";\nimport React, { useEffect, useState, createElement } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNewDics } from \"../store/action/index\";\nimport { useLocation } from \"react-router-dom\";\n\nfunction NewDics() {\n  let loca = useLocation().pathname; //获取管理状态仓库\n\n  let state = useSelector(state => {\n    return state.newdicsReducer;\n  }); //获取仓库管理函数操作状态函数，获取新碟上架数据\n\n  let getData = useNewDics();\n  useEffect(() => {\n    getData(\"/album/newest\");\n  }, [loca]);\n  let data = state.data;\n  let [ulloc, setul] = useState(1);\n  let [time, setTime] = useState(true);\n  let [userClick, setClick] = useState(false);\n  let [contro, setcontro] = useState(false);\n  useEffect(() => {\n    if (data.length == undefined) {\n      // 获取元素节点和信息1克隆2克隆  再点3删除回到1\n      let ul = document.querySelector(\".newDic-Name\");\n      let list = ul.querySelectorAll(\".newDicList\");\n      let liwidth = list[0].clientWidth;\n      let next = document.querySelector(\".newDic-next\");\n      let prev = document.querySelector(\".newDic-prev\"); // ul.style.transform = `translate(-${(liwidth*5)*ulloc}px,0)`\n      // ul.style.transition = \"all 0.5s\"\n      //右击移动图片计时器\n\n      function imgmoveR() {\n        onceFn(cloneNext)();\n        setClick(true);\n        let rightmove = setInterval(function () {\n          //获取当前图片的margin-left值\n          var imgLoction = parseInt(window.getComputedStyle(ul, null).left); //每次的left值都要改变\n\n          ul.style.left = imgLoction + Math.floor((-liwidth * (ulloc * 5) - imgLoction) / 5) + \"px\"; //当为图片宽度的整数时清除计时器\n          // console.log(list.length/5,list.length/5-1,ulloc)\n\n          if (imgLoction === -(ulloc * 5 * liwidth)) {\n            clearInterval(rightmove);\n            setClick(false); //获取插入假图片后当前的图片总数\n            // console.log(ulloc,list.length/5)\n            //此时的n是真实图片个数4,试图中对应的是插入后图片节点的最后一张图位置\n\n            if (ulloc === 3 && list.length / 5 === 3) {\n              // console.log(\"该回到第一份\")\n              ul.style.left = \"0px\";\n              remove(\"next\");\n              setul(0);\n              setClick(false);\n            }\n          }\n        }, 10);\n      }\n\n      next.onclick = function () {\n        if (!userClick) {\n          setul(++ulloc);\n          imgmoveR();\n        }\n      }; //左边移动计时器\t\n\n\n      function imgmoveL() {\n        let leftmove = setInterval(function () {\n          //获取当前的margin值\n          setClick(true);\n          let imgLoction = parseInt(window.getComputedStyle(ul, null).left);\n          ul.style.left = imgLoction + Math.ceil((-liwidth * (ulloc * 5) - imgLoction) / 5) + \"px\"; // 如果刚好显示一张图片则清除计时器\n\n          console.log(ulloc, list.length / 5);\n\n          if (imgLoction === -(ulloc * 5 * liwidth)) {\n            console.log(\"fdf\");\n            clearInterval(leftmove);\n            setClick(false);\n\n            if (ulloc === -1) {\n              ul.style.left = \"0px\";\n              console.log(\"woyao \");\n              setcontro(true);\n            }\n          }\n        }, 16);\n      } //左击事件\n\n\n      prev.onclick = function () {\n        onceFn(clonePrev)();\n        setul(--ulloc);\n        imgmoveL();\n      }; //初始化是克隆节点\n\n\n      function onceFn(fn) {\n        return function () {\n          if (time) {\n            // console.log(\"函数执行\"+time)\n            setTime(false);\n            fn();\n          }\n        };\n      }\n\n      let cloneNext = function () {\n        return data.albums.slice(0, 5).map((item, index) => {\n          let clonelist = document.createElement(\"li\");\n          clonelist.setAttribute(\"class\", \"newDicList cloneLi\");\n          clonelist.innerHTML += `<div key=${index}>\n                            <div class=\"newDic-muc\">\n                                <img src=${item.picUrl} alt=\"\"/>\n                                <a href=\"\" class=\"newDic-cover\"></a>\n                                <a href=\"\" class=\"newDic-play\"></a>\n                            </div>\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-name\">${item.name}</a></p>\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-txt\">${item.artist.name}</a></p>\n                        </div>\n                    `;\n          ul.appendChild(clonelist);\n        });\n      };\n\n      let clonePrev = function () {\n        return data.albums.slice(5, 10).map((item, index) => {\n          let clonelist = document.createElement(\"li\");\n          clonelist.setAttribute(\"class\", \"newDicList cloneLi\");\n          clonelist.innerHTML += `<div key=${index}>\n                            <div class=\"newDic-muc\">\n                                <img src=${item.picUrl} alt=\"\"/>\n                                <a href=\"\" class=\"newDic-cover\"></a>\n                                <a href=\"\" class=\"newDic-play\"></a>\n                            </div>\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-name\">${item.name}</a></p>\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-txt\">${item.artist.name}</a></p>\n                        </div>\n                    `;\n          ul.insertBefore(clonelist, list[0]);\n          console.log(clonelist);\n        });\n      }; // 删除克隆节点\n\n\n      let remove = function (direction) {\n        let newlist = ul.querySelectorAll(\".newDicList\");\n        console.log(\"kankan\");\n\n        if (direction === \"prev\") {\n          Array(...newlist).slice(0, 5).map(item => {\n            ul.removeChild(item);\n          });\n        } else if (direction === \"next\") {\n          let newlist = ul.querySelectorAll(\".newDicList\");\n          console.log(Array(...newlist).slice(-5, 0));\n          Array(...newlist).slice(-5, 0).map(item => {\n            ul.removeChild(item);\n          });\n        }\n      };\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dic-muc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newDic-prev\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newDic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"newDic-Name\",\n    style: {\n      translate: ``\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, data.length === undefined ? data.albums.slice(0, 10).map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"newDicList\",\n      key: item.artist.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newDic-muc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.picUrl,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"\",\n      className: \"newDic-cover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"\",\n      className: \"newDic-play\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"dictxt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"\",\n      className: \"newDic-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 46\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"dictxt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"\",\n      className: \"newDic-txt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 46\n      }\n    }, item.artist.name)));\n  }) : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newDic-next\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default NewDics;","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/component/newdic.js"],"names":["React","useEffect","useState","createElement","useSelector","useNewDics","useLocation","NewDics","loca","pathname","state","newdicsReducer","getData","data","ulloc","setul","time","setTime","userClick","setClick","contro","setcontro","length","undefined","ul","document","querySelector","list","querySelectorAll","liwidth","clientWidth","next","prev","imgmoveR","onceFn","cloneNext","rightmove","setInterval","imgLoction","parseInt","window","getComputedStyle","left","style","Math","floor","clearInterval","remove","onclick","imgmoveL","leftmove","ceil","console","log","clonePrev","fn","albums","slice","map","item","index","clonelist","setAttribute","innerHTML","picUrl","name","artist","appendChild","insertBefore","direction","newlist","Array","removeChild","translate","id"],"mappings":"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","sourcesContent":["import  React, { useEffect,useState, createElement} from \"react\"\r\nimport {useSelector} from \"react-redux\"\r\nimport {useNewDics} from \"../store/action/index\"\r\nimport {useLocation} from \"react-router-dom\"\r\nfunction NewDics(){\r\n    let loca = useLocation().pathname\r\n    //获取管理状态仓库\r\n    let state = useSelector((state)=>{\r\n        return state.newdicsReducer;\r\n    })\r\n    //获取仓库管理函数操作状态函数，获取新碟上架数据\r\n    let getData = useNewDics()\r\n    useEffect(()=>{\r\n        getData(\"/album/newest\")\r\n    },[loca])\r\n    let data = state.data\r\n    let [ulloc,setul] = useState(1)\r\n    let [time,setTime] = useState(true)\r\n    let [userClick,setClick] = useState(false)\r\n    let [contro,setcontro] = useState(false)\r\n    useEffect(()=>{\r\n        if(data.length==undefined){\r\n                // 获取元素节点和信息1克隆2克隆  再点3删除回到1\r\n            let ul = document.querySelector(\".newDic-Name\")\r\n            let list = ul.querySelectorAll(\".newDicList\")\r\n            let liwidth = list[0].clientWidth;\r\n            let next = document.querySelector(\".newDic-next\")\r\n            let prev = document.querySelector(\".newDic-prev\")\r\n            // ul.style.transform = `translate(-${(liwidth*5)*ulloc}px,0)`\r\n            // ul.style.transition = \"all 0.5s\"\r\n\r\n            //右击移动图片计时器\r\n            function imgmoveR(){\r\n                onceFn(cloneNext)()\r\n                setClick(true);\r\n                let rightmove = setInterval(function(){\r\n                    //获取当前图片的margin-left值\r\n                    var imgLoction = parseInt(window.getComputedStyle(ul,null).left);\r\n                    //每次的left值都要改变\r\n                    ul.style.left = imgLoction + Math.floor((-liwidth*(ulloc*5)-imgLoction)/5) + \"px\";\r\n                    //当为图片宽度的整数时清除计时器\r\n                    // console.log(list.length/5,list.length/5-1,ulloc)\r\n                    if(imgLoction===-(ulloc*5*liwidth)){\r\n                        clearInterval(rightmove);\r\n                        setClick(false);\r\n                        //获取插入假图片后当前的图片总数\r\n                        // console.log(ulloc,list.length/5)\r\n                        //此时的n是真实图片个数4,试图中对应的是插入后图片节点的最后一张图位置\r\n                        if(ulloc===3&&(list.length/5===3)){\r\n                            // console.log(\"该回到第一份\")\r\n                            ul.style.left = \"0px\";\r\n                            remove(\"next\")\r\n                            setul(0);\r\n                            setClick(false);\r\n                        }\r\n                    }\r\n                },10)\r\n            }\r\n            \r\n            next.onclick=function(){\r\n                if(!userClick){\r\n                    setul(++ulloc)\r\n                    imgmoveR()\r\n                }\r\n                \r\n            }\r\n            //左边移动计时器\t\r\n            function imgmoveL(){\r\n                let leftmove = setInterval(function(){\r\n                    //获取当前的margin值\r\n                    setClick(true);\r\n                    let imgLoction = parseInt(window.getComputedStyle(ul,null).left);\r\n                    ul.style.left = imgLoction + Math.ceil((-liwidth*(ulloc*5)-imgLoction)/5) + \"px\"; \r\n                    // 如果刚好显示一张图片则清除计时器\r\n                    console.log(ulloc,list.length/5)\r\n                    if(imgLoction===-(ulloc*5*liwidth)){\r\n                        console.log(\"fdf\")\r\n                        clearInterval(leftmove)\r\n                        setClick(false);\r\n                        if(ulloc===-1){\r\n                            ul.style.left = \"0px\";\r\n                            console.log(\"woyao \")\r\n                            setcontro(true)\r\n                        } \r\n                    }\r\n                },16)\r\n            }\r\n\r\n            //左击事件\r\n            prev.onclick = function(){\r\n                \r\n                onceFn(clonePrev)()\r\n                setul(--ulloc)\r\n                imgmoveL()\r\n            }\r\n\r\n            //初始化是克隆节点\r\n            function onceFn(fn){\r\n                return function(){\r\n                    if(time){\r\n                        // console.log(\"函数执行\"+time)\r\n                        setTime(false);\r\n                        fn()\r\n                    }\r\n                }\r\n            }\r\n\r\n            let cloneNext = function(){\r\n                return data.albums.slice(0,5).map((item,index)=>{\r\n                    let clonelist = document.createElement(\"li\")\r\n                    clonelist.setAttribute(\"class\",\"newDicList cloneLi\")\r\n                    clonelist.innerHTML += `<div key=${index}>\r\n                            <div class=\"newDic-muc\">\r\n                                <img src=${item.picUrl} alt=\"\"/>\r\n                                <a href=\"\" class=\"newDic-cover\"></a>\r\n                                <a href=\"\" class=\"newDic-play\"></a>\r\n                            </div>\r\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-name\">${item.name}</a></p>\r\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-txt\">${item.artist.name}</a></p>\r\n                        </div>\r\n                    `\r\n                    ul.appendChild(clonelist)\r\n                })\r\n            }\r\n\r\n            let clonePrev = function(){\r\n                return data.albums.slice(5,10).map((item,index)=>{\r\n                    let clonelist = document.createElement(\"li\")\r\n                    clonelist.setAttribute(\"class\",\"newDicList cloneLi\")\r\n                    clonelist.innerHTML += `<div key=${index}>\r\n                            <div class=\"newDic-muc\">\r\n                                <img src=${item.picUrl} alt=\"\"/>\r\n                                <a href=\"\" class=\"newDic-cover\"></a>\r\n                                <a href=\"\" class=\"newDic-play\"></a>\r\n                            </div>\r\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-name\">${item.name}</a></p>\r\n                            <p class=\"dictxt\"><a href=\"\" class=\"newDic-txt\">${item.artist.name}</a></p>\r\n                        </div>\r\n                    `\r\n                    ul.insertBefore(clonelist,list[0]) \r\n                    \r\n                    console.log(clonelist)\r\n                })\r\n            }\r\n            // 删除克隆节点\r\n            let remove = function(direction){\r\n                let newlist = ul.querySelectorAll(\".newDicList\")\r\n                console.log(\"kankan\")\r\n                if(direction===\"prev\"){\r\n                    Array(...newlist).slice(0,5).map((item)=>{\r\n                        ul.removeChild(item)\r\n                    })\r\n                }else if(direction===\"next\"){\r\n                    let newlist = ul.querySelectorAll(\".newDicList\")\r\n                    console.log(Array(...newlist).slice(-5,0))\r\n                    Array(...newlist).slice(-5,0).map((item)=>{\r\n                        ul.removeChild(item)\r\n                    })\r\n                }\r\n            }\r\n    }       \r\n            \r\n           \r\n    })\r\n    return(\r\n        <div className=\"dic-muc\">\r\n            <div className=\"newDic-prev\"></div>\r\n            <div className=\"newDic\">\r\n                <ul className=\"newDic-Name\" style={{translate:``}}>\r\n                   {data.length===undefined?(data.albums.slice(0,10).map((item,index)=>{\r\n                       return (\r\n                        <li className=\"newDicList\" key={item.artist.id}>\r\n                            <div className=\"newDic-muc\">\r\n                                <img src={item.picUrl} alt=\"\"/>\r\n                                <a href=\"\" className=\"newDic-cover\"></a>\r\n                                <a href=\"\" className=\"newDic-play\"></a>\r\n                            </div>\r\n                       <p className=\"dictxt\"><a href=\"\" className=\"newDic-name\">{item.name}</a></p>\r\n                       <p className=\"dictxt\"><a href=\"\" className=\"newDic-txt\">{item.artist.name}</a></p>\r\n                        </li>\r\n                       )\r\n                   })):\"\"}\r\n                </ul>\r\n            </div>\r\n            <div className=\"newDic-next\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NewDics"]},"metadata":{},"sourceType":"module"}