{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport { useState, useCallback } from 'react';\n\nvar dumpIndex = function dumpIndex(step, arr) {\n  var index = step > 0 ? step - 1 // move forward\n  : arr.length + step; // move backward\n\n  if (index >= arr.length - 1) {\n    index = arr.length - 1;\n  }\n\n  if (index < 0) {\n    index = 0;\n  }\n\n  return index;\n};\n\nvar split = function split(step, targetArr) {\n  var index = dumpIndex(step, targetArr);\n  return {\n    _current: targetArr[index],\n    _before: targetArr.slice(0, index),\n    _after: targetArr.slice(index + 1)\n  };\n};\n\nexport default function useHistoryTravel(initialValue) {\n  var _useState = useState({\n    present: initialValue,\n    past: [],\n    future: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      history = _useState2[0],\n      setHistory = _useState2[1];\n\n  var present = history.present,\n      past = history.past,\n      future = history.future;\n  var updateValue = useCallback(function (val) {\n    setHistory({\n      present: val,\n      future: [],\n      past: [].concat(_toConsumableArray(past), [present])\n    });\n  }, [history, setHistory]);\n\n  var _forward = useCallback(function () {\n    var step = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n    if (future.length === 0) {\n      return;\n    }\n\n    var _split = split(step, future),\n        _before = _split._before,\n        _current = _split._current,\n        _after = _split._after;\n\n    setHistory({\n      past: [].concat(_toConsumableArray(past), [present], _toConsumableArray(_before)),\n      present: _current,\n      future: _after\n    });\n  }, [history, setHistory]);\n\n  var _backward = useCallback(function () {\n    var step = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n\n    if (past.length === 0) {\n      return;\n    }\n\n    var _split2 = split(step, past),\n        _before = _split2._before,\n        _current = _split2._current,\n        _after = _split2._after;\n\n    setHistory({\n      past: _before,\n      present: _current,\n      future: [].concat(_toConsumableArray(_after), [present], _toConsumableArray(future))\n    });\n  }, [history, setHistory]);\n\n  var go = useCallback(function (step) {\n    if (step === 0) {\n      return;\n    }\n\n    if (step > 0) {\n      return _forward(step);\n    }\n\n    _backward(step);\n  }, [_backward, _forward]);\n  return {\n    value: present,\n    setValue: updateValue,\n    backLength: past.length,\n    forwardLength: future.length,\n    go: go,\n    back: useCallback(function () {\n      go(-1);\n    }, [go]),\n    forward: useCallback(function () {\n      go(1);\n    }, [go])\n  };\n}","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/node_modules/@umijs/hooks/es/useHistoryTravel/index.js"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","useState","useCallback","dumpIndex","step","index","split","targetArr","_current","_before","slice","_after","useHistoryTravel","initialValue","_useState","present","past","future","_useState2","history","setHistory","updateValue","val","concat","_forward","arguments","_split","_backward","_split2","go","setValue","backLength","forwardLength","back","forward"],"mappings":"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","sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useState, useCallback } from 'react';\n\nvar dumpIndex = function dumpIndex(step, arr) {\n  var index = step > 0 ? step - 1 // move forward\n  : arr.length + step; // move backward\n\n  if (index >= arr.length - 1) {\n    index = arr.length - 1;\n  }\n\n  if (index < 0) {\n    index = 0;\n  }\n\n  return index;\n};\n\nvar split = function split(step, targetArr) {\n  var index = dumpIndex(step, targetArr);\n  return {\n    _current: targetArr[index],\n    _before: targetArr.slice(0, index),\n    _after: targetArr.slice(index + 1)\n  };\n};\n\nexport default function useHistoryTravel(initialValue) {\n  var _useState = useState({\n    present: initialValue,\n    past: [],\n    future: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      history = _useState2[0],\n      setHistory = _useState2[1];\n\n  var present = history.present,\n      past = history.past,\n      future = history.future;\n  var updateValue = useCallback(function (val) {\n    setHistory({\n      present: val,\n      future: [],\n      past: [].concat(_toConsumableArray(past), [present])\n    });\n  }, [history, setHistory]);\n\n  var _forward = useCallback(function () {\n    var step = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n    if (future.length === 0) {\n      return;\n    }\n\n    var _split = split(step, future),\n        _before = _split._before,\n        _current = _split._current,\n        _after = _split._after;\n\n    setHistory({\n      past: [].concat(_toConsumableArray(past), [present], _toConsumableArray(_before)),\n      present: _current,\n      future: _after\n    });\n  }, [history, setHistory]);\n\n  var _backward = useCallback(function () {\n    var step = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n\n    if (past.length === 0) {\n      return;\n    }\n\n    var _split2 = split(step, past),\n        _before = _split2._before,\n        _current = _split2._current,\n        _after = _split2._after;\n\n    setHistory({\n      past: _before,\n      present: _current,\n      future: [].concat(_toConsumableArray(_after), [present], _toConsumableArray(future))\n    });\n  }, [history, setHistory]);\n\n  var go = useCallback(function (step) {\n    if (step === 0) {\n      return;\n    }\n\n    if (step > 0) {\n      return _forward(step);\n    }\n\n    _backward(step);\n  }, [_backward, _forward]);\n  return {\n    value: present,\n    setValue: updateValue,\n    backLength: past.length,\n    forwardLength: future.length,\n    go: go,\n    back: useCallback(function () {\n      go(-1);\n    }, [go]),\n    forward: useCallback(function () {\n      go(1);\n    }, [go])\n  };\n}"]},"metadata":{},"sourceType":"module"}