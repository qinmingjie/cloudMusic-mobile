{"ast":null,"code":"// from swr\nimport { isDocumentVisible, isOnline } from './index';\nvar listeners = [];\n\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    var index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\n\nvar eventsBinded = false;\n\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n  var revalidate = function revalidate() {\n    if (!isDocumentVisible() || !isOnline()) return;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false); // only bind the events once\n\n  eventsBinded = true;\n}\n\nexport default subscribe;","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/node_modules/@umijs/use-request/es/utils/windowFocus.js"],"names":["isDocumentVisible","isOnline","listeners","subscribe","listener","push","unsubscribe","index","indexOf","splice","eventsBinded","window","addEventListener","revalidate","i","length"],"mappings":"AAAA;AACA,SAASA,iBAAT,EAA4BC,QAA5B,QAA4C,SAA5C;AACA,IAAIC,SAAS,GAAG,EAAhB;;AAEA,SAASC,SAAT,CAAmBC,QAAnB,EAA6B;AAC3BF,EAAAA,SAAS,CAACG,IAAV,CAAeD,QAAf;AACA,SAAO,SAASE,WAAT,GAAuB;AAC5B,QAAIC,KAAK,GAAGL,SAAS,CAACM,OAAV,CAAkBJ,QAAlB,CAAZ;AACAF,IAAAA,SAAS,CAACO,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AACD,GAHD;AAID;;AAED,IAAIG,YAAY,GAAG,KAAnB;;AAEA,IAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,gBAAxC,IAA4D,CAACF,YAAjE,EAA+E;AAC7E,MAAIG,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC,QAAI,CAACb,iBAAiB,EAAlB,IAAwB,CAACC,QAAQ,EAArC,EAAyC;;AAEzC,SAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,SAAS,CAACa,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,UAAIV,QAAQ,GAAGF,SAAS,CAACY,CAAD,CAAxB;AACAV,MAAAA,QAAQ;AACT;AACF,GAPD;;AASAO,EAAAA,MAAM,CAACC,gBAAP,CAAwB,kBAAxB,EAA4CC,UAA5C,EAAwD,KAAxD;AACAF,EAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCC,UAAjC,EAA6C,KAA7C,EAX6E,CAWxB;;AAErDH,EAAAA,YAAY,GAAG,IAAf;AACD;;AAED,eAAeP,SAAf","sourcesContent":["// from swr\nimport { isDocumentVisible, isOnline } from './index';\nvar listeners = [];\n\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    var index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\n\nvar eventsBinded = false;\n\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n  var revalidate = function revalidate() {\n    if (!isDocumentVisible() || !isOnline()) return;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false); // only bind the events once\n\n  eventsBinded = true;\n}\n\nexport default subscribe;"]},"metadata":{},"sourceType":"module"}