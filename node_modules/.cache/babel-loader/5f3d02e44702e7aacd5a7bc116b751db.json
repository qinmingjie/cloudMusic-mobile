{"ast":null,"code":"import _toConsumableArray from\"E:\\\\github-project\\\\cloudMusic-mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from\"react\";import{useMnewmusic}from\"../store/action/index\";import{useSelector,useDispatch}from\"react-redux\";import{NavLink}from\"react-router-dom\";import{getUrl}from\"../store/action/index\";///personalized/newsong\nexport default function MMucislist(){var state=useSelector(function(state){return state.MnewdataReducer;});var getData=useMnewmusic();useEffect(function(){getData(\"personalized/newsong\");},[]);var data=state.Newdata;//播放控制\nuseEffect(function(){var musicList=document.querySelectorAll(\".Mnotice-list\");var audio=document.querySelector(\"audio\");var play=document.querySelector(\".playWrap\");var cover=play.querySelector(\".cover\");if(musicList.length!==0){_toConsumableArray(musicList).map(function(item,index){item.onclick=function(){var musicFather=item.querySelector(\".Mnum-music\");var musicId=musicFather.getAttribute(\"mus-id\");var picUrl=musicFather.getAttribute(\"album-id\");getUrl(\"/song/url?id=\".concat(musicId)).then(function(res){var music=res.data.data[0].url;if(music!==null){cover.style.backgroundImage=\"url(\".concat(picUrl,\")\");cover.classList.add(\"anima\");cover.style.animationPlayState=\"running\";audio.setAttribute(\"src\",music);play.querySelector(\".play\").style.display=\"block\";play.querySelector(\".end\").style.display=\"none\";}else{alert(\"抱歉，暂时无法播放\");}});};});}});return/*#__PURE__*/React.createElement(\"ul\",{className:\"Mnotice-mucList\"},data.length===0?\"\":data.result.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{className:\"Mnotice-list Mcanplay\",id:\"\",key:item.id,style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"Mnum-music\",\"mus-id\":item.id,\"album-id\":item.picUrl},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:index<3?\"Mrednum\":\"\",style:{display:\"none\"}},index+1),/*#__PURE__*/React.createElement(\"p\",{className:\"Mnewname\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Mnewname1\"},item.name),/*#__PURE__*/React.createElement(\"span\",{className:\"Mnewname2\"},item.song.alias.length===0?\"\":item.song.alias[0])),/*#__PURE__*/React.createElement(\"p\",{className:\"Mnewalumb\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Micon\"},\"\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"MalumbTxt\"},item.song.artists.map(function(item,index){return(index<=0?\"\":\"/\")+item.name;}),\"-\",item.song.album.name))),/*#__PURE__*/React.createElement(\"div\",{className:\"Mnum-show\"})));}));}","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/mobileconponemt/newmusic.js"],"names":["React","useEffect","useMnewmusic","useSelector","useDispatch","NavLink","getUrl","MMucislist","state","MnewdataReducer","getData","data","Newdata","musicList","document","querySelectorAll","audio","querySelector","play","cover","length","map","item","index","onclick","musicFather","musicId","getAttribute","picUrl","then","res","music","url","style","backgroundImage","classList","add","animationPlayState","setAttribute","display","alert","result","id","cursor","name","song","alias","artists","album"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\"\r\nimport {useMnewmusic} from \"../store/action/index\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport {NavLink} from \"react-router-dom\"\r\nimport {getUrl} from \"../store/action/index\"\r\n///personalized/newsong\r\nexport default function MMucislist(){\r\n    let state = useSelector((state)=>{\r\n        return state.MnewdataReducer\r\n    })\r\n    let getData = useMnewmusic()\r\n    useEffect(()=>{\r\n        getData(\"personalized/newsong\")\r\n    },[])\r\n    let data = state.Newdata\r\n\r\n    //播放控制\r\n    useEffect(()=>{\r\n        let musicList = document.querySelectorAll(\".Mnotice-list\")\r\n        let audio = document.querySelector(\"audio\")\r\n        let play = document.querySelector(\".playWrap\")\r\n        let cover = play.querySelector(\".cover\")\r\n        if(musicList.length!==0){\r\n            [...musicList].map((item,index)=>{\r\n                item.onclick=function(){\r\n                    let musicFather = item.querySelector(\".Mnum-music\")\r\n                    let musicId = musicFather.getAttribute(\"mus-id\")\r\n                    let picUrl = musicFather.getAttribute(\"album-id\")\r\n                    getUrl(`/song/url?id=${musicId}`).then((res)=>{\r\n                        let music = res.data.data[0].url;\r\n                        if(music!==null){\r\n                            cover.style.backgroundImage = `url(${picUrl})`;\r\n                            cover.classList.add(\"anima\")\r\n                            cover.style.animationPlayState = \"running\"\r\n                            audio.setAttribute(\"src\",music)\r\n                            play.querySelector(\".play\").style.display=\"block\"\r\n                            play.querySelector(\".end\").style.display=\"none\"\r\n                        }else{\r\n                            alert(\"抱歉，暂时无法播放\")\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n    return(\r\n        <ul className=\"Mnotice-mucList\">\r\n            {data.length===0?\"\":(data.result.map((item,index)=>{\r\n                return(\r\n                    <li className=\"Mnotice-list Mcanplay\" id={\"\"} key={item.id} style={{cursor:\"pointer\"}}>\r\n                         <span  className=\"Mnum-music\" mus-id={item.id} album-id={item.picUrl}>\r\n                            <div>\r\n                                <span className={index<3?\"Mrednum\":\"\"} style={{display:\"none\"}}>{index+1}</span>\r\n                                <p className=\"Mnewname\">\r\n                                    \r\n                                    <span className=\"Mnewname1\">{item.name}</span>\r\n                                    <span className=\"Mnewname2\">{(item.song.alias.length===0)?\"\":(item.song.alias[0])}</span>\r\n                                </p>\r\n                                <p className=\"Mnewalumb\">\r\n                                    <span className=\"Micon\">&nbsp;</span>\r\n                                    <span className=\"MalumbTxt\">{item.song.artists.map((item,index)=>{return (index<=0?\"\":\"/\")+item.name})}-{item.song.album.name}</span>\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"Mnum-show\"></div>\r\n                        </span>\r\n                    </li>\r\n                )\r\n            }))}\r\n        </ul>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}