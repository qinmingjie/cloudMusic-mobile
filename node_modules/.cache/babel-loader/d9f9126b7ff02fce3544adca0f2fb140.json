{"ast":null,"code":"function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport { useRef, useContext } from 'react';\nimport request from 'umi-request';\nimport useAsync from './useAsync';\nimport useLoadMore from './useLoadMore';\nimport usePaginated from './usePaginated';\nimport ConfigContext from './configContext';\n\nfunction useRequest(service) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var contextConfig = useContext(ConfigContext);\n\n  var finalOptions = _objectSpread({}, contextConfig, {}, options);\n\n  var paginated = finalOptions.paginated,\n      loadMore = finalOptions.loadMore,\n      requestMethod = finalOptions.requestMethod;\n  var paginatedRef = useRef(paginated);\n  var loadMoreRef = useRef(loadMore);\n\n  if (paginatedRef.current !== paginated) {\n    throw Error('You should not modify the paginated of options');\n  }\n\n  if (loadMoreRef.current !== loadMore) {\n    throw Error('You should not modify the loadMore of options');\n  }\n\n  paginatedRef.current = paginated;\n  loadMoreRef.current = loadMore;\n  var finalRequestMethod = requestMethod || request;\n  var promiseService;\n\n  if (typeof service === 'string') {\n    promiseService = function promiseService() {\n      return finalRequestMethod(service);\n    };\n  } else if (_typeof(service) === 'object') {\n    var url = service.url,\n        rest = _objectWithoutProperties(service, [\"url\"]);\n\n    promiseService = function promiseService() {\n      return requestMethod ? requestMethod(service) : request(url, rest);\n    };\n  } else {\n    promiseService = function promiseService() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return new Promise(function (resolve, reject) {\n        var result = service.apply(void 0, args);\n\n        if (result.then) {\n          result.then(function (data) {\n            return resolve(data);\n          }).catch(function (e) {\n            return reject(e);\n          });\n        } else if (typeof result === 'string') {\n          finalRequestMethod(result).then(function (data) {\n            resolve(data);\n          }).catch(function (e) {\n            return reject(e);\n          });\n        } else if (_typeof(result) === 'object') {\n          // umi-request 需要拆分下字段\n          if (requestMethod) {\n            finalRequestMethod(result).then(function (data) {\n              resolve(data);\n            }).catch(function (e) {\n              return reject(e);\n            });\n          } else {\n            var _url = result.url,\n                _rest = _objectWithoutProperties(result, [\"url\"]);\n\n            request(_url, _rest).then(function (data) {\n              resolve(data);\n            }).catch(function (e) {\n              return reject(e);\n            });\n          }\n        }\n      });\n    };\n  }\n\n  if (loadMore) {\n    return useLoadMore(promiseService, finalOptions);\n  }\n\n  if (paginated) {\n    return usePaginated(promiseService, finalOptions);\n  }\n\n  return useAsync(promiseService, finalOptions);\n}\n\nvar UseAPIProvider = ConfigContext.Provider;\nexport { useAsync, usePaginated, useLoadMore, UseAPIProvider };\nexport default useRequest;","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/node_modules/@umijs/use-request/es/index.js"],"names":["_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","_typeof","obj","Symbol","iterator","constructor","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","configurable","writable","useRef","useContext","request","useAsync","useLoadMore","usePaginated","ConfigContext","useRequest","service","options","undefined","contextConfig","finalOptions","paginated","loadMore","requestMethod","paginatedRef","loadMoreRef","current","Error","finalRequestMethod","promiseService","url","rest","_len","args","Array","_key","Promise","resolve","reject","result","then","data","catch","e","_url","_rest","UseAPIProvider","Provider"],"mappings":"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","sourcesContent":["function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRef, useContext } from 'react';\nimport request from 'umi-request';\nimport useAsync from './useAsync';\nimport useLoadMore from './useLoadMore';\nimport usePaginated from './usePaginated';\nimport ConfigContext from './configContext';\n\nfunction useRequest(service) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var contextConfig = useContext(ConfigContext);\n\n  var finalOptions = _objectSpread({}, contextConfig, {}, options);\n\n  var paginated = finalOptions.paginated,\n      loadMore = finalOptions.loadMore,\n      requestMethod = finalOptions.requestMethod;\n  var paginatedRef = useRef(paginated);\n  var loadMoreRef = useRef(loadMore);\n\n  if (paginatedRef.current !== paginated) {\n    throw Error('You should not modify the paginated of options');\n  }\n\n  if (loadMoreRef.current !== loadMore) {\n    throw Error('You should not modify the loadMore of options');\n  }\n\n  paginatedRef.current = paginated;\n  loadMoreRef.current = loadMore;\n  var finalRequestMethod = requestMethod || request;\n  var promiseService;\n\n  if (typeof service === 'string') {\n    promiseService = function promiseService() {\n      return finalRequestMethod(service);\n    };\n  } else if (_typeof(service) === 'object') {\n    var url = service.url,\n        rest = _objectWithoutProperties(service, [\"url\"]);\n\n    promiseService = function promiseService() {\n      return requestMethod ? requestMethod(service) : request(url, rest);\n    };\n  } else {\n    promiseService = function promiseService() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return new Promise(function (resolve, reject) {\n        var result = service.apply(void 0, args);\n\n        if (result.then) {\n          result.then(function (data) {\n            return resolve(data);\n          }).catch(function (e) {\n            return reject(e);\n          });\n        } else if (typeof result === 'string') {\n          finalRequestMethod(result).then(function (data) {\n            resolve(data);\n          }).catch(function (e) {\n            return reject(e);\n          });\n        } else if (_typeof(result) === 'object') {\n          // umi-request 需要拆分下字段\n          if (requestMethod) {\n            finalRequestMethod(result).then(function (data) {\n              resolve(data);\n            }).catch(function (e) {\n              return reject(e);\n            });\n          } else {\n            var _url = result.url,\n                _rest = _objectWithoutProperties(result, [\"url\"]);\n\n            request(_url, _rest).then(function (data) {\n              resolve(data);\n            }).catch(function (e) {\n              return reject(e);\n            });\n          }\n        }\n      });\n    };\n  }\n\n  if (loadMore) {\n    return useLoadMore(promiseService, finalOptions);\n  }\n\n  if (paginated) {\n    return usePaginated(promiseService, finalOptions);\n  }\n\n  return useAsync(promiseService, finalOptions);\n}\n\nvar UseAPIProvider = ConfigContext.Provider;\nexport { useAsync, usePaginated, useLoadMore, UseAPIProvider };\nexport default useRequest;"]},"metadata":{},"sourceType":"module"}