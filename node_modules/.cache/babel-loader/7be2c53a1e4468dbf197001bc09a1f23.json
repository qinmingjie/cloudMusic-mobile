{"ast":null,"code":"import _toConsumableArray from\"E:\\\\github-project\\\\cloudMusic-mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\github-project\\\\cloudMusic-mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import PlayCover from\"./playcover\";import{NavLink}from\"react-router-dom\";import{getUrl}from\"../store/action/index\";function TopMusicList(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];// console.log(props.data)\n//获取音乐地址状态管理函数\nuseEffect(function(){var musicList=document.querySelectorAll(\".notice-list\");var audio=document.querySelector(\"audio\");var play=document.querySelector(\".playWrap\");var cover=play.querySelector(\".cover\");if(musicList.length!==0){_toConsumableArray(musicList).map(function(item,index){item.onclick=function(){var musicFather=item.querySelector(\".num-music\");var musicId=musicFather.getAttribute(\"mus-id\");var picUrl=musicFather.getAttribute(\"album-id\");getUrl(\"/song/url?id=\".concat(musicId)).then(function(res){var music=res.data.data[0].url;if(music!==null){cover.style.backgroundImage=\"url(\".concat(picUrl,\")\");cover.classList.add(\"anima\");cover.style.animationPlayState=\"running\";audio.setAttribute(\"src\",music);play.querySelector(\".play\").style.display=\"block\";play.querySelector(\".end\").style.display=\"none\";}else{alert(\"抱歉，暂时无法播放\");}});};});}});return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"ul\",{className:\"notice-mucList\"},props.data.length===0?\"\":props.data.playlist.tracks.slice(0,10).map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{className:\"notice-list canplay\",id:show?\"show\":\"\",key:item.id,onMouseEnter:function onMouseEnter(e){var parentnode=e.target;function Parent(){if(parentnode.parentElement.getAttribute(\"class\")===\"notice-mucList\"){parentnode.querySelector(\".num-show\").style.display=\"block\";}else{parentnode=parentnode.parentElement;Parent();}}Parent();},onMouseLeave:function onMouseLeave(e){var parentnode=e.target;function Parent(){if(parentnode.parentElement.getAttribute(\"class\")===\"notice-mucList\"){parentnode.querySelector(\".num-show\").style.display=\"none\";}else{parentnode=parentnode.parentElement;Parent();}}Parent();}},/*#__PURE__*/React.createElement(\"span\",{className:index<3?\"rednum\":\"\"},index+1),/*#__PURE__*/React.createElement(NavLink,{to:\"\",className:\"num-music\",\"mus-id\":item.id,\"album-id\":item.al.picUrl},item.name),/*#__PURE__*/React.createElement(\"div\",{className:\"num-show\"},/*#__PURE__*/React.createElement(PlayCover,null)));})),/*#__PURE__*/React.createElement(\"div\",{className:\"notice more\"},/*#__PURE__*/React.createElement(NavLink,{to:\"\"},\"\\u67E5\\u770B\\u66F4\\u591A>\")));}export default TopMusicList;","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/component/topmusiclist.js"],"names":["React","Fragment","useState","useEffect","PlayCover","NavLink","getUrl","TopMusicList","props","show","setShow","musicList","document","querySelectorAll","audio","querySelector","play","cover","length","map","item","index","onclick","musicFather","musicId","getAttribute","picUrl","then","res","music","data","url","style","backgroundImage","classList","add","animationPlayState","setAttribute","display","alert","playlist","tracks","slice","id","e","parentnode","target","Parent","parentElement","al","name"],"mappings":"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","sourcesContent":["import React, { Fragment,useState,useEffect} from \"react\"\r\nimport PlayCover from \"./playcover\"\r\nimport {NavLink} from \"react-router-dom\"\r\nimport {getUrl} from \"../store/action/index\"\r\nfunction TopMusicList(props){\r\n    let [show,setShow] = useState(false)\r\n    // console.log(props.data)\r\n    //获取音乐地址状态管理函数\r\n    useEffect(()=>{\r\n        let musicList = document.querySelectorAll(\".notice-list\")\r\n        let audio = document.querySelector(\"audio\")\r\n        let play = document.querySelector(\".playWrap\")\r\n        let cover = play.querySelector(\".cover\")\r\n        if(musicList.length!==0){\r\n            [...musicList].map((item,index)=>{\r\n                item.onclick=function(){\r\n                    let musicFather = item.querySelector(\".num-music\")\r\n                    let musicId = musicFather.getAttribute(\"mus-id\")\r\n                    let picUrl = musicFather.getAttribute(\"album-id\")\r\n                    getUrl(`/song/url?id=${musicId}`).then((res)=>{\r\n                        let music = res.data.data[0].url;\r\n                        if(music!==null){\r\n                            cover.style.backgroundImage = `url(${picUrl})`;\r\n                            cover.classList.add(\"anima\")\r\n                            cover.style.animationPlayState = \"running\"\r\n                            audio.setAttribute(\"src\",music)\r\n                            play.querySelector(\".play\").style.display=\"block\"\r\n                            play.querySelector(\".end\").style.display=\"none\"\r\n                        }else{\r\n                            alert(\"抱歉，暂时无法播放\")\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n    return(\r\n        <Fragment>\r\n            <ul className=\"notice-mucList\">\r\n                {props.data.length===0?\"\":(props.data.playlist.tracks.slice(0,10).map((item,index)=>{\r\n                    return(\r\n                        <li className=\"notice-list canplay\" id={show?\"show\":\"\"} key={item.id} \r\n                            onMouseEnter={function(e){\r\n                                let parentnode = e.target;\r\n                                function Parent(){\r\n                                    if(parentnode.parentElement.getAttribute(\"class\")===\"notice-mucList\"){\r\n                                      parentnode.querySelector(\".num-show\").style.display=\"block\"\r\n                                    }else{\r\n                                        parentnode = parentnode.parentElement\r\n                                        Parent()\r\n                                    }\r\n                                }\r\n                                Parent()\r\n                            }}\r\n                            onMouseLeave={function(e){\r\n                                let parentnode = e.target;\r\n                                function Parent(){\r\n                                    if(parentnode.parentElement.getAttribute(\"class\")===\"notice-mucList\"){\r\n                                        parentnode.querySelector(\".num-show\").style.display=\"none\"\r\n                                    }else{\r\n                                        parentnode = parentnode.parentElement\r\n                                        Parent()\r\n                                    }\r\n                                }\r\n                                Parent()\r\n                            }}\r\n                        >\r\n                            <span className={index<3?\"rednum\":\"\"}>{index+1}</span>\r\n                            <NavLink  to=\"\" className=\"num-music\" mus-id={item.id} album-id={item.al.picUrl}>{item.name}</NavLink>\r\n                            <div className=\"num-show\">\r\n                                <PlayCover/>\r\n                            </div>\r\n                        </li>\r\n                    )\r\n                }))}\r\n            </ul>\r\n            <div className=\"notice more\">\r\n                <NavLink to=\"\">查看更多></NavLink>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default TopMusicList;"]},"metadata":{},"sourceType":"module"}