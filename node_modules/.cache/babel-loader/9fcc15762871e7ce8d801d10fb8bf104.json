{"ast":null,"code":"var _jsxFileName = \"E:\\\\github-project\\\\cloudMusic-mobile\\\\src\\\\component\\\\topmusiclist.js\";\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport PlayCover from \"./playcover\";\nimport { NavLink } from \"react-router-dom\";\nimport { getUrl } from \"../store/action/index\";\n\nfunction TopMusicList(props) {\n  let [show, setShow] = useState(false); // console.log(props.data)\n  //获取音乐地址状态管理函数\n\n  useEffect(() => {\n    let musicList = document.querySelectorAll(\".notice-list\");\n    let audio = document.querySelector(\"audio\");\n    let play = document.querySelector(\".playWrap\");\n    let cover = play.querySelector(\".cover\");\n\n    if (musicList.length !== 0) {\n      [...musicList].map((item, index) => {\n        item.onclick = function () {\n          let musicFather = item.querySelector(\".num-music\");\n          let musicId = musicFather.getAttribute(\"mus-id\");\n          let picUrl = musicFather.getAttribute(\"album-id\");\n          getUrl(`/song/url?id=${musicId}`).then(res => {\n            let music = res.data.data[0].url;\n\n            if (music !== null) {\n              cover.style.backgroundImage = `url(${picUrl})`;\n              cover.className = \"abc\";\n              audio.setAttribute(\"src\", music);\n            } else {\n              alert(\"抱歉，暂时无法播放\");\n            }\n          });\n        };\n      });\n    }\n  });\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"notice-mucList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, props.data.length === 0 ? \"\" : props.data.playlist.tracks.slice(0, 10).map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"notice-list canplay\",\n      id: show ? \"show\" : \"\",\n      key: item.id,\n      onMouseEnter: function (e) {\n        let parentnode = e.target;\n\n        function Parent() {\n          if (parentnode.parentElement.getAttribute(\"class\") === \"notice-mucList\") {\n            parentnode.querySelector(\".num-show\").style.display = \"block\";\n          } else {\n            parentnode = parentnode.parentElement;\n            Parent();\n          }\n        }\n\n        Parent();\n      },\n      onMouseLeave: function (e) {\n        let parentnode = e.target;\n\n        function Parent() {\n          if (parentnode.parentElement.getAttribute(\"class\") === \"notice-mucList\") {\n            parentnode.querySelector(\".num-show\").style.display = \"none\";\n          } else {\n            parentnode = parentnode.parentElement;\n            Parent();\n          }\n        }\n\n        Parent();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: index < 3 ? \"rednum\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 29\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(NavLink, {\n      to: \"\",\n      className: \"num-music\",\n      \"mus-id\": item.id,\n      \"album-id\": item.al.picUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 29\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"num-show\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(PlayCover, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 33\n      }\n    })));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"notice more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \"\\u67E5\\u770B\\u66F4\\u591A>\")));\n}\n\nexport default TopMusicList;","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/component/topmusiclist.js"],"names":["React","Fragment","useState","useEffect","PlayCover","NavLink","getUrl","TopMusicList","props","show","setShow","musicList","document","querySelectorAll","audio","querySelector","play","cover","length","map","item","index","onclick","musicFather","musicId","getAttribute","picUrl","then","res","music","data","url","style","backgroundImage","className","setAttribute","alert","playlist","tracks","slice","id","e","parentnode","target","Parent","parentElement","display","al","name"],"mappings":"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","sourcesContent":["import React, { Fragment,useState,useEffect} from \"react\"\r\nimport PlayCover from \"./playcover\"\r\nimport {NavLink} from \"react-router-dom\"\r\nimport {getUrl} from \"../store/action/index\"\r\nfunction TopMusicList(props){\r\n    let [show,setShow] = useState(false)\r\n    // console.log(props.data)\r\n    //获取音乐地址状态管理函数\r\n    useEffect(()=>{\r\n        let musicList = document.querySelectorAll(\".notice-list\")\r\n        let audio = document.querySelector(\"audio\")\r\n        let play = document.querySelector(\".playWrap\")\r\n        let cover = play.querySelector(\".cover\")\r\n        if(musicList.length!==0){\r\n            [...musicList].map((item,index)=>{\r\n                item.onclick=function(){\r\n                    let musicFather = item.querySelector(\".num-music\")\r\n                    let musicId = musicFather.getAttribute(\"mus-id\")\r\n                    let picUrl = musicFather.getAttribute(\"album-id\")\r\n                    getUrl(`/song/url?id=${musicId}`).then((res)=>{\r\n                        let music = res.data.data[0].url;\r\n                        if(music!==null){\r\n                            cover.style.backgroundImage = `url(${picUrl})`;\r\n                            cover.className = \"abc\"\r\n                            audio.setAttribute(\"src\",music)\r\n                        }else{\r\n                            alert(\"抱歉，暂时无法播放\")\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n    return(\r\n        <Fragment>\r\n            <ul className=\"notice-mucList\">\r\n                {props.data.length===0?\"\":(props.data.playlist.tracks.slice(0,10).map((item,index)=>{\r\n                    return(\r\n                        <li className=\"notice-list canplay\" id={show?\"show\":\"\"} key={item.id} \r\n                            onMouseEnter={function(e){\r\n                                let parentnode = e.target;\r\n                                function Parent(){\r\n                                    if(parentnode.parentElement.getAttribute(\"class\")===\"notice-mucList\"){\r\n                                      parentnode.querySelector(\".num-show\").style.display=\"block\"\r\n                                    }else{\r\n                                        parentnode = parentnode.parentElement\r\n                                        Parent()\r\n                                    }\r\n                                }\r\n                                Parent()\r\n                            }}\r\n                            onMouseLeave={function(e){\r\n                                let parentnode = e.target;\r\n                                function Parent(){\r\n                                    if(parentnode.parentElement.getAttribute(\"class\")===\"notice-mucList\"){\r\n                                        parentnode.querySelector(\".num-show\").style.display=\"none\"\r\n                                    }else{\r\n                                        parentnode = parentnode.parentElement\r\n                                        Parent()\r\n                                    }\r\n                                }\r\n                                Parent()\r\n                            }}\r\n                        >\r\n                            <span className={index<3?\"rednum\":\"\"}>{index+1}</span>\r\n                            <NavLink  to=\"\" className=\"num-music\" mus-id={item.id} album-id={item.al.picUrl}>{item.name}</NavLink>\r\n                            <div className=\"num-show\">\r\n                                <PlayCover/>\r\n                            </div>\r\n                        </li>\r\n                    )\r\n                }))}\r\n            </ul>\r\n            <div className=\"notice more\">\r\n                <NavLink to=\"\">查看更多></NavLink>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default TopMusicList;"]},"metadata":{},"sourceType":"module"}