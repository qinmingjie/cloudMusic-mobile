{"ast":null,"code":"import _toConsumableArray from\"E:\\\\github-project\\\\cloudMusic-mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\github-project\\\\cloudMusic-mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,Fragment,useState}from\"react\";import{createStore}from\"redux\";import{useSelector,useDispatch}from\"react-redux\";import{useBanner,useInterTime}from\"../store/action/index\";import{useLocation,NavLink}from\"react-router-dom\";export default function BannerPage(props){var loca=useLocation().pathname;//获取状态管理仓库中的banner状态管理函数数据\nvar state=useSelector(function(state){return state;});var bannerReducer=state.bannerReducer;var getData=useBanner();var data=bannerReducer.data;//结构出需要的数据:id,图片地址，分类标签\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),imgloc=_useState2[0],setLoc=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),opanum=_useState4[0],setopa=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isClick=_useState6[0],setClick=_useState6[1];//时间锁\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),isAni=_useState8[0],setAni=_useState8[1];//删除interval\nvar _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),clickAni=_useState10[0],setClickAni=_useState10[1];//点击banner按钮时锁定计时器\nvar banners=data.banners;var interval=setInterval(function(){if(banners!==undefined&&clickAni){if(document.querySelector(\".click-circle\")!==null){var span=document.querySelector(\".click-circle\").querySelectorAll(\"span\");Array.apply(void 0,_toConsumableArray(span)).map(function(item,index){item.setAttribute(\"class\",\"circle\");});if(imgloc===banners.length-1){Array.apply(void 0,_toConsumableArray(span))[0].classList.add(\"redcircle\");setLoc(0);// console.log(\"meiyou\")\nclearInterval(interval);}else if(imgloc<banners.length-1){setLoc(++imgloc);Array.apply(void 0,_toConsumableArray(span))[imgloc].classList.add(\"redcircle\");clearInterval(interval);}if(isAni.length>0){isAni.map(function(item,index){if(index<isAni.length-1){clearInterval(item);}else{// console.log(isAni[index])\n}});}}else{clearInterval(interval);}}},5000);useEffect(function(){isAni.push(interval);});useEffect(function(){getData();isAni.map(function(item,index){if(index<isAni.length){clearInterval(item);}});},[loca]);var clearInterFn=function clearInterFn(){isAni.map(function(item,index){if(index<isAni.length){clearInterval(item);}});};return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"par-ban\",onMouseMove:function onMouseMove(){setClickAni(false);clearInterFn();clearInterval(interval);},onMouseEnter:function onMouseEnter(){setClickAni(false);clearInterFn();clearInterval(interval);},onMouseOut:function onMouseOut(){setClickAni(true);}},/*#__PURE__*/React.createElement(\"div\",{className:\"brul\"},banners===undefined?\"\":/*#__PURE__*/React.createElement(\"img\",{src:banners[imgloc].imageUrl,alt:\"\",style:{filter:\"blur(800px)\"}})),/*#__PURE__*/React.createElement(\"div\",{className:\"banner-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"banner\"},banners===undefined?\"\":/*#__PURE__*/React.createElement(NavLink,{to:\"\",title:banners[0].typeTitle,className:\"ban-img\"},/*#__PURE__*/React.createElement(\"img\",{id:\"opcImg\",src:banners[imgloc].imageUrl,style:{opacity:\"\".concat(opanum)},alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"click-circle\"},banners===undefined?\"\":banners.map(function(item,index){return/*#__PURE__*/React.createElement(\"span\",{className:index===0?\"circle redcircle\":\"circle\",key:index,onClick:function onClick(){var span=document.querySelector(\".click-circle\").querySelectorAll(\"span\");Array.apply(void 0,_toConsumableArray(span)).map(function(item,index){item.setAttribute(\"class\",\"circle\");});Array.apply(void 0,_toConsumableArray(span))[index].classList.add(\"redcircle\");setLoc(index);}});})))),/*#__PURE__*/React.createElement(\"div\",{className:\"rev-left\",onClick:function onClick(){setClickAni(false);clearInterFn();if(isClick){var span=document.querySelector(\".click-circle\").querySelectorAll(\"span\");var opcImg=document.querySelector(\"#opcImg\");Array.apply(void 0,_toConsumableArray(span)).map(function(item,index){item.setAttribute(\"class\",\"circle\");});if(imgloc===0){opcImg.style.opacity=0;setLoc(banners.length-1);setTimeout(function(){opcImg.style.opacity=1;Array.apply(void 0,_toConsumableArray(span))[banners.length-1].classList.add(\"redcircle\");setClick(true);},500);}else{opcImg.style.opacity=0;setTimeout(function(){setLoc(--imgloc);opcImg.style.opacity=1;opcImg.style.transition=\"all 0.5s\";Array.apply(void 0,_toConsumableArray(span))[imgloc].classList.add(\"redcircle\");setClick(true);},500);}}},onMouseMove:function onMouseMove(){clearInterFn();setClickAni(false);clearInterval(interval);},onMouseEnter:function onMouseEnter(){clearInterFn();setClickAni(false);clearInterval(interval);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"rev-right\",onClick:function onClick(){clearInterFn();setClickAni(false);var opcImg=document.querySelector(\"#opcImg\");opcImg.classList.add(\"hidden\");var span=document.querySelector(\".click-circle\").querySelectorAll(\"span\");if(isClick){setClick(false);Array.apply(void 0,_toConsumableArray(span)).map(function(item,index){item.setAttribute(\"class\",\"circle\");});if(imgloc===banners.length-1){opcImg.style.opacity=0;setTimeout(function(){setLoc(0);opcImg.style.opacity=1;Array.apply(void 0,_toConsumableArray(span))[0].classList.add(\"redcircle\");setClick(true);},500);}else{opcImg.style.opacity=0;setTimeout(function(){setLoc(++imgloc);opcImg.style.opacity=1;opcImg.style.transition=\"all 0.5s\";Array.apply(void 0,_toConsumableArray(span))[imgloc].classList.add(\"redcircle\");setClick(true);},500);}}},onMouseMove:function onMouseMove(){clearInterFn();setClickAni(false);clearInterval(interval);},onMouseEnter:function onMouseEnter(){clearInterFn();setClickAni(false);clearInterval(interval);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"banner-downLoad\"},/*#__PURE__*/React.createElement(\"a\",{href:\"\",className:\"btn-down\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"downtext\"},\"PC \\u5B89\\u5353 iPhone WP iPad Mac \\u516D\\u5927\\u5BA2\\u6237\\u7AEF\")))));}","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/component/banner.js"],"names":["React","useEffect","Fragment","useState","createStore","useSelector","useDispatch","useBanner","useInterTime","useLocation","NavLink","BannerPage","props","loca","pathname","state","bannerReducer","getData","data","imgloc","setLoc","opanum","setopa","isClick","setClick","isAni","setAni","clickAni","setClickAni","banners","interval","setInterval","undefined","document","querySelector","span","querySelectorAll","Array","map","item","index","setAttribute","length","classList","add","clearInterval","push","clearInterFn","imageUrl","filter","typeTitle","opacity","opcImg","style","setTimeout","transition"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment,useState} from \"react\"\r\nimport {createStore} from \"redux\"\r\nimport {useSelector,useDispatch} from \"react-redux\"\r\nimport {useBanner,useInterTime} from \"../store/action/index\"\r\nimport {useLocation, NavLink} from \"react-router-dom\"\r\nexport default function BannerPage(props){\r\n    let loca = useLocation().pathname\r\n    //获取状态管理仓库中的banner状态管理函数数据\r\n    let state = useSelector((state)=>{   \r\n        return state\r\n    })\r\n    let {bannerReducer} = state;\r\n    let getData = useBanner()\r\n    \r\n\r\n    let {data} = bannerReducer\r\n    //结构出需要的数据:id,图片地址，分类标签\r\n    let [imgloc,setLoc] = useState(0)\r\n    let [opanum,setopa] = useState(1)\r\n    let [isClick,setClick] = useState(true)  //时间锁\r\n    let [isAni,setAni] = useState([])  //删除interval\r\n    let [clickAni,setClickAni] = useState(true)  //点击banner按钮时锁定计时器\r\n    let {banners} = data\r\n    \r\n    \r\n    \r\n    let interval  = setInterval(()=>{\r\n        if(banners!==undefined&&clickAni){\r\n            if(document.querySelector(\".click-circle\")!==null){\r\n                let span = document.querySelector(\".click-circle\").querySelectorAll(\"span\")\r\n                Array(...span).map((item,index)=>{\r\n                    item.setAttribute(\"class\",\"circle\")\r\n                })\r\n                if(imgloc===(banners.length-1)){\r\n                    Array(...span)[0].classList.add(\"redcircle\")\r\n                    setLoc(0)\r\n                    // console.log(\"meiyou\")\r\n                    clearInterval(interval)\r\n                }else if(imgloc<(banners.length-1)){\r\n                    setLoc(++imgloc)\r\n                    Array(...span)[imgloc].classList.add(\"redcircle\")\r\n                    clearInterval(interval)\r\n                }\r\n                if(isAni.length>0){\r\n                    isAni.map((item,index)=>{\r\n                        if(index<isAni.length-1){\r\n                            clearInterval(item)\r\n                        }else{\r\n                            // console.log(isAni[index])\r\n                        }\r\n                    })\r\n                }\r\n            }else{\r\n                clearInterval(interval)\r\n            }\r\n            \r\n        }\r\n        \r\n    },5000)\r\n    useEffect(()=>{\r\n        isAni.push(interval)\r\n    })\r\n    useEffect(()=>{\r\n        getData()\r\n        isAni.map((item,index)=>{\r\n            if(index<isAni.length){\r\n                clearInterval(item)\r\n            }\r\n        })\r\n    },[loca])\r\n    let clearInterFn = function(){\r\n        isAni.map((item,index)=>{\r\n            if(index<isAni.length){\r\n                clearInterval(item)\r\n            }\r\n        })\r\n    }\r\n\r\n   \r\n\r\n  \r\n    return (\r\n        <Fragment>\r\n            <div className=\"par-ban\"\r\n                onMouseMove={()=>{\r\n                    setClickAni(false)\r\n                    clearInterFn()\r\n                    clearInterval(interval)\r\n                }}\r\n                onMouseEnter={()=>{\r\n                    setClickAni(false)\r\n                    clearInterFn()\r\n                    clearInterval(interval)\r\n                }}\r\n                onMouseOut={()=>{\r\n                    setClickAni(true)\r\n                }}\r\n            >\r\n                <div className=\"brul\">\r\n                    {banners===undefined?\"\":(\r\n                            <img src={banners[imgloc].imageUrl} alt=\"\" style={{filter:\"blur(800px)\"}}/>\r\n                        )\r\n                    }\r\n                </div>\r\n                <div className=\"banner-wrap\">\r\n                    <div className=\"wrap\">\r\n                        <div className=\"banner\">\r\n                            {banners===undefined?\"\":(\r\n                                <NavLink to={\"\"} title={banners[0].typeTitle} className=\"ban-img\">\r\n                                    <img id={\"opcImg\"} src={banners[imgloc].imageUrl} style={{opacity:`${opanum}`}} alt=\"\"/>\r\n                                </NavLink>\r\n                                )\r\n                            }\r\n                            <div className=\"click-circle\">\r\n                                {banners===undefined?\"\":(banners.map((item,index)=>{\r\n                                    return(\r\n                                        <span className={index===0?\"circle redcircle\":\"circle\"} key={index}\r\n                                            onClick={()=>{\r\n                                                let span = document.querySelector(\".click-circle\").querySelectorAll(\"span\")\r\n                                                Array(...span).map((item,index)=>{\r\n                                                    item.setAttribute(\"class\",\"circle\")\r\n                                                })\r\n                                                Array(...span)[index].classList.add(\"redcircle\")\r\n                                                setLoc(index)\r\n                                            }}\r\n                                        ></span>\r\n                                    )\r\n                                }))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"rev-left\"\r\n                        onClick={()=>{\r\n                            setClickAni(false)\r\n                            clearInterFn()\r\n                            if(isClick){\r\n                                let span = document.querySelector(\".click-circle\").querySelectorAll(\"span\")\r\n                                let opcImg = document.querySelector(\"#opcImg\")\r\n                                Array(...span).map((item,index)=>{\r\n                                    item.setAttribute(\"class\",\"circle\")\r\n                                })\r\n                                if(imgloc===0){\r\n                                    opcImg.style.opacity = 0\r\n                                    setLoc(banners.length-1)\r\n                                    setTimeout(()=>{\r\n                                        opcImg.style.opacity = 1\r\n                                        Array(...span)[banners.length-1].classList.add(\"redcircle\")\r\n                                        setClick(true)\r\n                                    },500)\r\n                                    \r\n                                }else{\r\n                                    opcImg.style.opacity = 0\r\n                                    setTimeout(()=>{\r\n                                        setLoc(--imgloc)\r\n                                        opcImg.style.opacity = 1\r\n                                        opcImg.style.transition= \"all 0.5s\"\r\n                                        Array(...span)[imgloc].classList.add(\"redcircle\")\r\n                                        setClick(true)\r\n                                    },500)\r\n                                }\r\n                            }\r\n                        }}\r\n                        onMouseMove={()=>{\r\n                            clearInterFn()\r\n                            setClickAni(false)\r\n                            clearInterval(interval)\r\n                        }}\r\n                        onMouseEnter={()=>{\r\n                            clearInterFn()\r\n                            setClickAni(false)\r\n                            clearInterval(interval)\r\n                        }}\r\n                    ></div>\r\n                    <div className=\"rev-right\"\r\n                        onClick={()=>{\r\n                            clearInterFn()\r\n                            setClickAni(false)\r\n                            let opcImg = document.querySelector(\"#opcImg\")\r\n                            opcImg.classList.add(\"hidden\")\r\n                            let span = document.querySelector(\".click-circle\").querySelectorAll(\"span\")\r\n                            if(isClick){\r\n                                setClick(false)\r\n                                Array(...span).map((item,index)=>{\r\n                                    item.setAttribute(\"class\",\"circle\")\r\n                                })\r\n                                if(imgloc===banners.length-1){\r\n                                    opcImg.style.opacity = 0\r\n                                    setTimeout(()=>{\r\n                                        setLoc(0)\r\n                                        opcImg.style.opacity = 1\r\n                                        Array(...span)[0].classList.add(\"redcircle\")\r\n                                        setClick(true)\r\n                                    },500)\r\n                                }else{\r\n                                    opcImg.style.opacity = 0\r\n                                    setTimeout(()=>{\r\n                                        setLoc(++imgloc)\r\n                                        opcImg.style.opacity = 1\r\n                                        opcImg.style.transition= \"all 0.5s\"\r\n                                        Array(...span)[imgloc].classList.add(\"redcircle\")\r\n                                        setClick(true)\r\n                                    },500)\r\n                                }\r\n                            }\r\n                        }}\r\n                        onMouseMove={()=>{\r\n                            clearInterFn()\r\n                            setClickAni(false)\r\n                            clearInterval(interval)\r\n                        }}\r\n                        onMouseEnter={()=>{\r\n                            clearInterFn()\r\n                            setClickAni(false)\r\n                            clearInterval(interval)\r\n                        }}\r\n                    ></div>\r\n                    <div className=\"banner-downLoad\">\r\n                        <a href=\"\" className=\"btn-down\"></a>\r\n                        <p className=\"downtext\">PC 安卓 iPhone WP iPad Mac 六大客户端</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Fragment>        \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}