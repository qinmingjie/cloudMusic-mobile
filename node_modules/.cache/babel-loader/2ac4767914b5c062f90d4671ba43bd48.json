{"ast":null,"code":"import _toConsumableArray from\"E:\\\\github-project\\\\cloudMusic-mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import React,{useEffect,Fragment}from\"react\";import{useMhot}from\"../store/action/index\";import{useSelector,useDispatch}from\"react-redux\";import{getUrl}from\"../store/action/index\";export default function MHotMusic(){var state=useSelector(function(state){return state.MhotReducer;});var getData=useMhot();useEffect(function(){getData(\"/top/list?idx=1\");},[]);var data=state.data.playlist;// let {description,tracks} = data\n// if(data.length)\nuseEffect(function(){var musicList=document.querySelectorAll(\".Mnotice-list\");var audio=document.querySelector(\"audio\");var play=document.querySelector(\".playWrap\");var cover=play.querySelector(\".cover\");if(musicList.length!==0){_toConsumableArray(musicList).map(function(item,index){item.onclick=function(){var musicFather=item.querySelector(\".Mnum-music\");var musicId=musicFather.getAttribute(\"mus-id\");console.log(musicId);var picUrl=musicFather.getAttribute(\"album-id\");getUrl(\"/song/url?id=\".concat(musicId)).then(function(res){var music=res.data.data[0].url;if(music!==null){cover.style.backgroundImage=\"url(\".concat(picUrl,\")\");cover.classList.add(\"anima\");cover.style.animationPlayState=\"running\";audio.setAttribute(\"src\",music);play.querySelector(\".play\").style.display=\"block\";play.querySelector(\".end\").style.display=\"none\";}else{alert(\"抱歉，暂时无法播放\");}});};});}});return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mobile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-hotmusic\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-hoticon\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"m-hotdate\"})),/*#__PURE__*/React.createElement(\"ul\",{className:\"Mnotice-mucList Mhotlist\"},data===undefined?\"\":data.tracks.slice(0,20).map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{className:\"Mnotice-list Mcanplay\",id:item.id,key:item.id,style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"Mnum-music\",\"mus-id\":item.id,\"album-id\":\"\".concat(item.al.picUrl)},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"Mnumber\"+\" \"+(index<3?\"Mrednum\":\"\"),style:{display:\"block\"}},index<9?\"0\"+(index+1):index+1),/*#__PURE__*/React.createElement(\"p\",{className:\"Mnewname\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Mnewname1\"},item.name)),/*#__PURE__*/React.createElement(\"p\",{className:\"Mnewalumb\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Micon\"},\"\\xA0\"),/*#__PURE__*/React.createElement(\"span\",{className:\"MalumbTxt\"},item.ar.map(function(item,index){return(index<=0?\"\":\"/\")+item.name;}),\"-\",item.name))),/*#__PURE__*/React.createElement(\"div\",{className:\"Mnum-show\"})));}))));}","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/mobileconponemt/hotmusiclist.js"],"names":["React","useEffect","Fragment","useMhot","useSelector","useDispatch","getUrl","MHotMusic","state","MhotReducer","getData","data","playlist","musicList","document","querySelectorAll","audio","querySelector","play","cover","length","map","item","index","onclick","musicFather","musicId","getAttribute","console","log","picUrl","then","res","music","url","style","backgroundImage","classList","add","animationPlayState","setAttribute","display","alert","undefined","tracks","slice","id","cursor","al","name","ar"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment } from \"react\"\r\nimport {useMhot} from \"../store/action/index\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport {getUrl} from \"../store/action/index\"\r\nexport default function MHotMusic(){\r\n    let state = useSelector((state)=>{\r\n        return state.MhotReducer\r\n    })\r\n    let getData = useMhot()\r\n    useEffect(()=>{\r\n        getData(\"/top/list?idx=1\")\r\n    },[])\r\n    let data = state.data.playlist\r\n    // let {description,tracks} = data\r\n    // if(data.length)\r\n    useEffect(()=>{\r\n        let musicList = document.querySelectorAll(\".Mnotice-list\")\r\n        let audio = document.querySelector(\"audio\")\r\n        let play = document.querySelector(\".playWrap\")\r\n        let cover = play.querySelector(\".cover\")\r\n        if(musicList.length!==0){\r\n            [...musicList].map((item,index)=>{\r\n                item.onclick=function(){\r\n                    let musicFather = item.querySelector(\".Mnum-music\")\r\n                    let musicId = musicFather.getAttribute(\"mus-id\")\r\n                    console.log(musicId)\r\n                    let picUrl = musicFather.getAttribute(\"album-id\")\r\n                    getUrl(`/song/url?id=${musicId}`).then((res)=>{\r\n                        let music = res.data.data[0].url;\r\n                        if(music!==null){\r\n                            cover.style.backgroundImage = `url(${picUrl})`;\r\n                            cover.classList.add(\"anima\")\r\n                            cover.style.animationPlayState = \"running\"\r\n                            audio.setAttribute(\"src\",music)\r\n                            play.querySelector(\".play\").style.display=\"block\"\r\n                            play.querySelector(\".end\").style.display=\"none\"\r\n                        }else{\r\n                            alert(\"抱歉，暂时无法播放\")\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n    return(\r\n        <Fragment>\r\n            <div className=\"mobile\">\r\n                <div className=\"m-hotmusic\">\r\n                    <div className=\"m-hoticon\"></div>\r\n                    <p className=\"m-hotdate\"></p>\r\n                </div>\r\n                <ul className=\"Mnotice-mucList Mhotlist\">\r\n                    {data===undefined?\"\":(data.tracks.slice(0,20).map((item,index)=>{\r\n                        return(\r\n                            <li className=\"Mnotice-list Mcanplay\" id={item.id} key={item.id} style={{cursor:\"pointer\"}}>\r\n                                <span className=\"Mnum-music\" mus-id={item.id} album-id={`${item.al.picUrl}`}>\r\n                                    <div>\r\n                                        <span className={\"Mnumber\" + \" \" +(index<3?\"Mrednum\":\"\")} style={{display:\"block\"}}>{index<9?\"0\"+(index+1):index+1}</span>\r\n                                        <p className=\"Mnewname\">\r\n                                            <span className=\"Mnewname1\">{item.name}</span>\r\n                                        </p>\r\n                                        <p className=\"Mnewalumb\">\r\n                                            <span className=\"Micon\">&nbsp;</span>\r\n                                            <span className=\"MalumbTxt\">{item.ar.map((item,index)=>{return (index<=0?\"\":\"/\")+item.name})}-{item.name}</span>\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"Mnum-show\"></div>\r\n                                </span>\r\n                            </li>\r\n                        )\r\n                    }))}\r\n                </ul>\r\n            </div>\r\n        </Fragment>\r\n       \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}