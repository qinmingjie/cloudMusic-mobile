{"ast":null,"code":"var _jsxFileName = \"E:\\\\github-project\\\\cloudMusic-mobile\\\\src\\\\mobileconponemt\\\\msonglist.js\";\nimport React, { useEffect, Fragment, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { usePlaydetail } from \"../store/action/index\";\nimport DetailTitle from \"../component/detailtitle\";\nimport { NavLink } from \"react-router-dom\";\nimport qs from \"qs\";\nimport { getUrl } from \"../store/action/index\";\nexport default function MSongList() {\n  let [show, setShow] = useState(false); //获取地址栏中传过来的id以便于请求数据\n\n  let {\n    id\n  } = qs.parse(useLocation().search.slice(1)); //获取状态管理函数来管理歌单详情数据\n\n  let state = useSelector(state => {\n    return state.detailReducer;\n  }); //获取状态操作函数来请求数据\n\n  let getData = usePlaydetail();\n  useEffect(() => {\n    getData(`/playlist/detail?id=${id}`);\n  }, [id]); //结构出需要的数据\n  // console.log(state)\n\n  let data = state.data.playlist;\n  console.log(data === undefined ? \"\" : data);\n  useEffect(() => {\n    let musicList = document.querySelectorAll(\".Mnotice-list\");\n    let audio = document.querySelector(\"audio\");\n    let play = document.querySelector(\".playWrap\");\n    let cover = play.querySelector(\".cover\");\n\n    if (musicList.length !== 0) {\n      [...musicList].map((item, index) => {\n        item.onclick = function () {\n          let musicFather = item.querySelector(\".Mnum-music\");\n          let musicId = musicFather.getAttribute(\"mus-id\");\n          console.log(musicId);\n          let picUrl = musicFather.getAttribute(\"album-id\");\n          getUrl(`/song/url?id=${musicId}`).then(res => {\n            let music = res.data.data[0].url;\n\n            if (music !== null) {\n              cover.style.backgroundImage = `url(${picUrl})`;\n              cover.classList.add(\"anima\");\n              cover.style.animationPlayState = \"running\";\n              audio.setAttribute(\"src\", music);\n              play.querySelector(\".play\").style.display = \"block\";\n              play.querySelector(\".end\").style.display = \"none\";\n            } else {\n              alert(\"抱歉，暂时无法播放\");\n            }\n          });\n        };\n      });\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mobile detailInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, data === undefined ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-detailWrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 38\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-detailCoverImg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: data.coverImgUrl,\n    className: \"j-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-burlImg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: data.coverImgUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-txt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 33\n    }\n  }, data.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"m-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: data.creator.avatarUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: data.creator.gender === 0 ? \"m-office\" : data.creator.gender === 1 ? \"m-other\" : \"m-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 41\n    }\n  })), data.creator.nickname))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-detailTxt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-detailTags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 37\n    }\n  }, \"\\u6807\\u7B7E\\uFF1A\"), data.tags.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"i\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 48\n      }\n    }, item);\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"album-desc-more\",\n    className: \"m-intr\",\n    onClick: () => {\n      setShow(!show);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-detailSclieTxt\",\n    dangerouslySetInnerHTML: {\n      __html: data.description === null ? \"\" : data.description.replace(/\\n/g, `</br>`).length < 140 ? \"介绍：\" + data.description.replace(/\\n/g, `</br>`) : \"介绍：\" + (data.description.replace(/\\n/g, `</br>`).slice(0, 140) + \"...\")\n    },\n    style: show ? {\n      display: \"none\"\n    } : {\n      display: \"block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-detailSclieAll\",\n    dangerouslySetInnerHTML: {\n      __html: \"介绍：\" + (data.description === null ? \"\" : data.description.replace(/\\n/g, `</br>`))\n    },\n    style: !show ? {\n      display: \"none\"\n    } : {\n      display: \"block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 37\n    }\n  }), data.description === null ? \"\" : data.description.replace(/\\n/g, `</br>`).length < 140 ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-detailSelect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 124\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 158\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    id: show ? \"m-detailShow\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 164\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-detailh\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, \"\\u6B4C\\u66F2\\u5217\\u8868\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"Mnotice-mucList  Mhotlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, data.tracks.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"Mnotice-list Mcanplay\",\n      id: \"\",\n      key: item.id,\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"Mnum-music\",\n      \"mus-id\": item.id,\n      \"album-id\": `${item.al.picUrl}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"Mnumber\" + \" \" + (index < 3 ? \"Mrednum\" : \"\"),\n      style: {\n        display: \"block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 49\n      }\n    }, index < 9 ? \"0\" + (index + 1) : index + 1), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"Mnewname\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"Mnewname1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 53\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"Mnewname2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 53\n      }\n    }, item.ar.length === 0 ? \"\" : item.alia[0])), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"Mnewalumb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"Micon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 53\n      }\n    }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"MalumbTxt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 53\n      }\n    }, item.ar.map((item, index) => {\n      return (index <= 0 ? \"\" : \"/\") + item.name;\n    }), \"-\", item.al.name))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Mnum-show\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 45\n      }\n    })));\n  }))));\n}","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/src/mobileconponemt/msonglist.js"],"names":["React","useEffect","Fragment","useState","useLocation","useSelector","useDispatch","usePlaydetail","DetailTitle","NavLink","qs","getUrl","MSongList","show","setShow","id","parse","search","slice","state","detailReducer","getData","data","playlist","console","log","undefined","musicList","document","querySelectorAll","audio","querySelector","play","cover","length","map","item","index","onclick","musicFather","musicId","getAttribute","picUrl","then","res","music","url","style","backgroundImage","classList","add","animationPlayState","setAttribute","display","alert","coverImgUrl","name","creator","avatarUrl","gender","nickname","tags","__html","description","replace","tracks","cursor","al","ar","alia"],"mappings":"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","sourcesContent":["import React,{useEffect, Fragment,useState} from \"react\"\r\nimport {useLocation} from \"react-router-dom\"\r\nimport {useSelector, useDispatch} from \"react-redux\"\r\nimport {usePlaydetail} from \"../store/action/index\"\r\nimport DetailTitle from \"../component/detailtitle\"\r\nimport {NavLink} from \"react-router-dom\"\r\nimport qs from \"qs\"\r\nimport {getUrl} from \"../store/action/index\"\r\nexport default function MSongList(){\r\n    let [show,setShow] = useState(false)\r\n    //获取地址栏中传过来的id以便于请求数据\r\n    let {id} = qs.parse(useLocation().search.slice(1))\r\n\r\n    //获取状态管理函数来管理歌单详情数据\r\n    let state = useSelector((state)=>{\r\n        return state.detailReducer\r\n    })\r\n    //获取状态操作函数来请求数据\r\n    let getData = usePlaydetail()\r\n\r\n    useEffect(()=>{\r\n        getData(`/playlist/detail?id=${id}`)\r\n    },[id])\r\n    //结构出需要的数据\r\n    // console.log(state)\r\n    let data = state.data.playlist\r\n    console.log((data===undefined)?\"\":data)\r\n    useEffect(()=>{\r\n        let musicList = document.querySelectorAll(\".Mnotice-list\")\r\n        let audio = document.querySelector(\"audio\")\r\n        let play = document.querySelector(\".playWrap\")\r\n        let cover = play.querySelector(\".cover\")\r\n        if(musicList.length!==0){\r\n            [...musicList].map((item,index)=>{\r\n                item.onclick=function(){\r\n                    let musicFather = item.querySelector(\".Mnum-music\")\r\n                    let musicId = musicFather.getAttribute(\"mus-id\")\r\n                    console.log(musicId)\r\n                    let picUrl = musicFather.getAttribute(\"album-id\")\r\n                    getUrl(`/song/url?id=${musicId}`).then((res)=>{\r\n                        let music = res.data.data[0].url;\r\n                        if(music!==null){\r\n                            cover.style.backgroundImage = `url(${picUrl})`;\r\n                            cover.classList.add(\"anima\")\r\n                            cover.style.animationPlayState = \"running\"\r\n                            audio.setAttribute(\"src\",music)\r\n                            play.querySelector(\".play\").style.display=\"block\"\r\n                            play.querySelector(\".end\").style.display=\"none\"\r\n                        }else{\r\n                            alert(\"抱歉，暂时无法播放\")\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    })\r\n    return (\r\n        <div className=\"mobile detailInfo\">\r\n             {(data===undefined)?\"\":(<div className={\"m-detailWrap\"}> \r\n                        <div className={\"m-detailCoverImg\"}>\r\n                            <div className=\"m-cover\">\r\n                                <img src={data.coverImgUrl} className=\"j-img\"/>\r\n                            </div>\r\n                            <div className=\"m-burlImg\">\r\n                                <img src={data.coverImgUrl}/>\r\n                            </div>\r\n                            <div className=\"m-title\">\r\n                                <p className=\"m-txt\">{data.name}</p>\r\n                                <p className=\"m-icons\">\r\n                                    <span className=\"m-icon\">\r\n                                        <img src={data.creator.avatarUrl}/>\r\n                                        <i className={(data.creator.gender===0)?\"m-office\":(data.creator.gender===1)?\"m-other\":\"m-star\"}></i>                                \r\n                                    </span>\r\n                                    {data.creator.nickname}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className={\"m-detailTxt\"}>\r\n                            <div className=\"\">\r\n                                <div className={\"m-detailTags\"}>\r\n                                    <span>标签：</span>\r\n                                    {data.tags.map((item,index)=>{\r\n                                        return <i key={index}>{item}</i>\r\n                                    })}\r\n                                </div>\r\n                                <div id=\"album-desc-more\" className=\"m-intr\"\r\n                                    onClick={()=>{\r\n                                        setShow(!show)\r\n                                    }}\r\n                                >\r\n                                    <p \r\n                                        className={\"m-detailSclieTxt\"}\r\n                                        dangerouslySetInnerHTML={{\r\n                                            __html:((data.description===null)?\"\":(data.description.replace(/\\n/g,`</br>`).length)<140?(\"介绍：\"+(data.description.replace(/\\n/g,`</br>`))):(\"介绍：\"+(data.description.replace(/\\n/g,`</br>`).slice(0,140) + \"...\")))\r\n                                        }}\r\n                                        style={show?{display:\"none\"}:{display:\"block\"}}\r\n                                    >\r\n                                    </p> \r\n                                    <p \r\n                                        className={\"m-detailSclieAll\"}\r\n                                        dangerouslySetInnerHTML={{\r\n                                            __html:\"介绍：\" + ((data.description===null)?\"\":data.description.replace(/\\n/g,`</br>`))\r\n                                        }}\r\n                                        style={!show?{display:\"none\"}:{display:\"block\"}}\r\n                                    >\r\n                                    </p>\r\n                                    {((data.description===null)?\"\":(data.description.replace(/\\n/g,`</br>`).length<140)?\"\":<div className={\"m-detailSelect\"}><span><i id={show?\"m-detailShow\":\"\"}></i></span></div>)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"m-detailh\">歌曲列表</div>\r\n                        <ul className=\"Mnotice-mucList  Mhotlist\">\r\n                            {(data.tracks.map((item,index)=>{\r\n                                return(\r\n                                    <li className=\"Mnotice-list Mcanplay\" id={\"\"} key={item.id}  style={{cursor:\"pointer\"}}>\r\n                                        <span  className=\"Mnum-music\" mus-id={item.id} album-id={`${item.al.picUrl}`}>\r\n                                            <div>\r\n                                                <span className={\"Mnumber\" + \" \" +(index<3?\"Mrednum\":\"\")} style={{display:\"block\"}}>{index<9?\"0\"+(index+1):index+1}</span>\r\n                                                <p className=\"Mnewname\">\r\n                                                    <span className=\"Mnewname1\">{item.name}</span>\r\n                                                    <span className=\"Mnewname2\">{(item.ar.length===0)?\"\":(item.alia[0])}</span>\r\n                                                </p>\r\n                                                <p className=\"Mnewalumb\">\r\n                                                    <span className=\"Micon\">&nbsp;</span>\r\n                                                    <span className=\"MalumbTxt\">{item.ar.map((item,index)=>{return (index<=0?\"\":\"/\")+item.name})}-{item.al.name}</span>\r\n                                                </p>\r\n                                            </div>\r\n                                            <div className=\"Mnum-show\"></div>\r\n                                        </span>\r\n                                    </li>\r\n                                )\r\n                            }))}\r\n                        </ul>\r\n                </div>)}\r\n            \r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}