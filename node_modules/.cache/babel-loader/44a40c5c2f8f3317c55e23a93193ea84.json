{"ast":null,"code":"function _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport { useRef, useLayoutEffect, useState } from 'react';\nimport 'intersection-observer';\n\nfunction isInViewPort(el) {\n  if (!el) {\n    return false;\n  }\n\n  var viewPortWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n  var viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n  var rect = el.getBoundingClientRect();\n\n  if (rect) {\n    var top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right;\n    return bottom > 0 && top <= viewPortHeight && left <= viewPortWidth && right > 0;\n  }\n\n  return false;\n}\n\nfunction useInViewport() {\n  var element = useRef();\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var hasPassedInElement = args.length === 1;\n  var arg = useRef(args[0]);\n  arg.current = args[0];\n\n  var _useState = useState(function () {\n    var initDOM = typeof arg.current === 'function' ? arg.current() : arg.current;\n    return isInViewPort(initDOM);\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      inViewPort = _useState2[0],\n      setInViewport = _useState2[1];\n\n  useLayoutEffect(function () {\n    var passedInElement = typeof arg.current === 'function' ? arg.current() : arg.current;\n    var targetElement = hasPassedInElement ? passedInElement : element.current;\n\n    if (!targetElement) {\n      return function () {};\n    }\n\n    var observer = new IntersectionObserver(function (entries) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = entries[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var entry = _step.value;\n\n          if (entry.isIntersecting) {\n            setInViewport(true);\n          } else {\n            setInViewport(false);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    });\n    observer.observe(targetElement);\n    return function () {\n      observer.disconnect();\n    };\n  }, [element.current, typeof arg.current === 'function' ? undefined : arg.current]);\n\n  if (hasPassedInElement) {\n    return [inViewPort];\n  }\n\n  return [inViewPort, element];\n}\n\nexport default useInViewport;","map":{"version":3,"sources":["E:/github-project/cloudMusic-mobile/node_modules/@umijs/hooks/es/useInViewport/index.js"],"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","useRef","useLayoutEffect","useState","isInViewPort","el","viewPortWidth","window","innerWidth","document","documentElement","clientWidth","body","viewPortHeight","innerHeight","clientHeight","rect","getBoundingClientRect","top","bottom","left","right","useInViewport","element","_len","arguments","args","_key","hasPassedInElement","arg","current","_useState","initDOM","_useState2","inViewPort","setInViewport","passedInElement","targetElement","observer","IntersectionObserver","entries","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","entry","isIntersecting","return","observe","disconnect"],"mappings":"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","sourcesContent":["function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useRef, useLayoutEffect, useState } from 'react';\nimport 'intersection-observer';\n\nfunction isInViewPort(el) {\n  if (!el) {\n    return false;\n  }\n\n  var viewPortWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n  var viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n  var rect = el.getBoundingClientRect();\n\n  if (rect) {\n    var top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right;\n    return bottom > 0 && top <= viewPortHeight && left <= viewPortWidth && right > 0;\n  }\n\n  return false;\n}\n\nfunction useInViewport() {\n  var element = useRef();\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var hasPassedInElement = args.length === 1;\n  var arg = useRef(args[0]);\n  arg.current = args[0];\n\n  var _useState = useState(function () {\n    var initDOM = typeof arg.current === 'function' ? arg.current() : arg.current;\n    return isInViewPort(initDOM);\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      inViewPort = _useState2[0],\n      setInViewport = _useState2[1];\n\n  useLayoutEffect(function () {\n    var passedInElement = typeof arg.current === 'function' ? arg.current() : arg.current;\n    var targetElement = hasPassedInElement ? passedInElement : element.current;\n\n    if (!targetElement) {\n      return function () {};\n    }\n\n    var observer = new IntersectionObserver(function (entries) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = entries[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var entry = _step.value;\n\n          if (entry.isIntersecting) {\n            setInViewport(true);\n          } else {\n            setInViewport(false);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    });\n    observer.observe(targetElement);\n    return function () {\n      observer.disconnect();\n    };\n  }, [element.current, typeof arg.current === 'function' ? undefined : arg.current]);\n\n  if (hasPassedInElement) {\n    return [inViewPort];\n  }\n\n  return [inViewPort, element];\n}\n\nexport default useInViewport;"]},"metadata":{},"sourceType":"module"}