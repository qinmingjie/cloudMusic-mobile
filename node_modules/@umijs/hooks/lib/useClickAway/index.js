"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useClickAway;

var _react = require("react");

// 鼠标点击事件，click 不会监听右键
var defaultEvent = 'click';

function useClickAway(onClickAway, dom) {
  var eventName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultEvent;
  var element = (0, _react.useRef)();
  var handler = (0, _react.useCallback)(function (event) {
    var targetElement = typeof dom === 'function' ? dom() : dom;
    var el = targetElement || element.current;

    if (!el || el.contains(event.target)) {
      return;
    }

    onClickAway(event);
  }, [element.current, onClickAway, dom]);
  (0, _react.useEffect)(function () {
    document.addEventListener(eventName, handler);
    return function () {
      document.removeEventListener(eventName, handler);
    };
  }, [eventName, handler]);
  return element;
}